ncl
ude<
s
t
di
o.
h
>
#i
ncl
ude<
s
t
dl
i
b.
h
>
#def
i
neCOMPARE(
x,
y)(
(
x=
=
y)
?
0:
(
x>y)
?
1
:
-
1
)
s
t
r
uctnode
{
f
l
oa
tcoef
f
;
i
ntexp;
s
t
r
uctnode*l
i
nk
;
}
;
t
ypedefs
t
r
uctnode*pol
ypoi
nt
er
;
voi
da
t
t
a
ch
(
f
l
oa
tcoef
f
i
ci
ent
,
i
ntexponent
,
pol
ypoi
n
t
er*
pt
r
)
{
pol
ypoi
nt
ert
emp;
t
emp=
(
pol
ypoi
nt
er
)
ma
l
l
oc(
s
i
zeof
(
s
t
r
uctnode)
)
;
t
emp-
>coef
f
=
coef
f
i
ci
ent
;
t
emp-
>exp=
exponent
;
(
*
pt
r
)
-
>l
i
nk
=
t
emp;
*
pt
r
=
t
emp;
(
*
pt
r
)
-
>l
i
nk
=
NUL
L
;
}
pol
ypoi
nt
erca
dd(
pol
ypoi
nt
era
,
pol
ypoi
nt
erb)
{
pol
ypoi
nt
erc,
l
a
s
t
C,
s
t
a
r
t
A;
i
nts
um,
done=
0;
s
t
a
r
t
A=
a
;
a
=
a
-
>l
i
nk
;
b=
b-
>l
i
nk
;
c=
(
pol
ypoi
nt
er
)
ma
l
l
oc(
s
i
zeof
(
s
t
r
uctnode)
)
;
c-
>exp=
-
1
;
l
a
s
t
C=
c;
do
{
s
wi
t
ch
(
COMPARE(
a
-
>exp,
b-
>exp)
)
{
ca
s
e1
:
a
t
t
a
ch
(
a
-
>coef
f
,
a
-
>exp,
&l
a
s
t
C)
;
a
=
a
-
>l
i
nk
;
br
ea
k
;ca
s
e0:
i
f
(
s
t
a
r
t
A=
=
a
)
done=
1
;
el
s
e
{
s
um=
a
-
>coef
f
+
b-
>coef
f
;
i
f
(
s
um)
a
t
t
a
ch
(
s
um,
a
-
>exp,
&l
a
s
t
C)
;
a
=
a
-
>l
i
nk
;
b=
b-
>l
i
nk
;
}
br
ea
k
;
ca
s
e-
1
:
a
t
t
a
ch
(
b-
>coef
f
,
b-
>exp,
&l
a
s
t
C)
;
b=
b-
>l
i
nk
;
br
ea
k
;
}
}
wh
i
l
e(
!
done)
;
l
a
s
t
C-
>l
i
nk
=
c;
r
et
ur
nc;
}
voi
dpr
i
nt
Pol
y(
pol
ypoi
nt
erk
)
{
k
=
k
-
>l
i
nk
;
wh
i
l
e(
(
(
k
-
>l
i
nk
)
-
>exp)
!
=
-
1
)
{
pr
i
nt
f
(
"
%f
x^
%d+"
,
k
-
>coef
f
,
k
-
>exp)
;
k
=
k
-
>l
i
nk
;
}
pr
i
n
t
f
(
"
%f
x^
%d"
,
k
-
>coef
f
,
k
-
>exp)
;
pr
i
n
t
f
(
"
\
n"
)
;
}
i
ntma
i
n(
)
{
pol
ypoi
nt
era
,
b,
c,
endA,
endB;
i
ntn,
i
,
expon
;
f
l
oa
tcoef
;
a
=
(
pol
ypoi
nt
er
)
ma
l
l
oc(
s
i
zeof
(
s
t
r
uctnode)
)
;
a
-
>exp=
-
1
;
b=
(
pol
ypoi
nt
er
)
ma
l
l
oc(
s
i
zeof
(
s
t
r
uctnode)
)
;
b-
>exp=
-
1
;
pr
i
n
t
f
(
"
ent
ert
h
enumberoft
er
msf
orf
i
r
s
tpol
ynomi
a
l
\
n"
)
;
s
ca
nf
(
"
%d"
,
&n)
;
endA=
a
;
f
or
(
i
=
0;
i
<n;
i
+
+
)
{
pr
i
nt
f
(
"
ent
ert
h
ecoef
f
i
ci
ent
\
n"
)
;
s
ca
nf
(
"
%f
"
,
&coef
)
;
pr
i
nt
f
(
"
ent
ert
h
eexponenet
\
n"
)
;
s
ca
nf
(
"
%d"
,
&expon)
;
a
t
t
a
ch
(
coef
,
expon,
&endA)
;
}}
endA-
>l
i
nk
=
a
;
pr
i
n
t
f
(
"
ent
ert
h
enumberoft
er
msf
ors
econdpol
ynomi
a
l
\
n"
)
;
s
ca
nf
(
"
%d"
,
&n)
;
endB=
b;
f
or
(
i
=
0;
i
<n;
i

